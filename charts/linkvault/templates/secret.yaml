apiVersion: v1
kind: Secret
metadata:
  name: {{ include "linkvault.fullname" . }}-secrets
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "linkvault.labels" . | nindent 4 }}
type: Opaque
data:
  # PostgreSQL credentials
  postgresql-username: {{ .Values.postgresql.auth.username | b64enc | quote }}
  postgresql-password: {{ .Values.postgresql.auth.password | b64enc | quote }}
  postgresql-database: {{ .Values.postgresql.auth.database | b64enc | quote }}
  # Connection string for backend
  connection-string: {{ include "linkvault.postgresql.connectionString" . | b64enc | quote }}
  # String encryption passphrase
  string-encryption-passphrase: {{ .Values.secrets.stringEncryptionPassPhrase | b64enc | quote }}
  # Certificate passphrase
  certificate-passphrase: {{ .Values.secrets.certificatePassPhrase | b64enc | quote }}
  # Certificate file
  openiddict.pfx: {{ .Files.Get "openiddict.pfx" | b64enc | quote }}
